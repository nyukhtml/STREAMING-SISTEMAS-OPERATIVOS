<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Streaming</title>
    <style>
/* Animaci√≥n pulsante suave */
@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 20px #f06292, 0 0 40px #f5576c;
  }
  50% {
    box-shadow: 0 0 30px #f06292, 0 0 60px #f5576c;
  }
}

#back-btn {
  animation: pulse 2.5s infinite ease-in-out;
  position: relative;
  overflow: hidden;
}

/* Ripple efecto al hacer click */
#back-btn.ripple::after {
  content: "";
  position: absolute;
  border-radius: 50%;
  width: 100px;
  height: 100px;
  background: rgba(255, 255, 255, 0.3);
  animation: ripple-effect 0.6s ease-out;
  pointer-events: none;
  transform: scale(0);
  top: var(--ripple-y);
  left: var(--ripple-x);
}

@keyframes ripple-effect {
  to {
    transform: scale(4);
    opacity: 0;
  }
}
        /* ====== Estilos existentes ====== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0a0a0a; min-height: 100vh; padding: 20px; overflow-x: hidden; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { text-align: center; color: #fff; font-size: 3em; margin-bottom: 40px; text-shadow: 0 0 20px rgba(255, 255, 255, 0.3); animation: fadeInDown 1s ease; }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        .movies-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 60px; margin-bottom: 50px; padding: 40px; }
        .movie-card { position: relative; border-radius: 20px; overflow: visible; cursor: pointer; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); animation: fadeInUp 0.8s ease; animation-fill-mode: both; height: 500px; }
        .movie-card:nth-child(1) { animation-delay: 0.1s; }
        .movie-card:nth-child(2) { animation-delay: 0.2s; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
        .movie-card:hover { transform: translateY(-15px) scale(1.02); }
        .ambient-glow { position: absolute; top: -40px; left: -40px; right: -40px; bottom: -40px; border-radius: 30px; z-index: 0; pointer-events: none; }
        .ambient-glow canvas { width: 100%; height: 100%; filter: blur(50px) brightness(1.5) saturate(2); opacity: 0.8; }
        .movie-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.8) 100%); opacity: 0; transition: opacity 0.4s ease; z-index: 2; border-radius: 20px; }
        .movie-card:hover::before { opacity: 1; }
        .poster-container { position: relative; width: 100%; height: 100%; border-radius: 20px; overflow: hidden; z-index: 1; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8); }
        .poster-image { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 0.45s ease, filter 0.45s ease; }

        /* Sheen (destello) sutil sobre portadas (se mantiene) */
        .poster-container::after{
          content: "";
          position: absolute;
          top: -10%;
          left: -40%;
          width: 40%;
          height: 140%;
          background: linear-gradient(120deg, rgba(255,255,255,0), rgba(255,255,255,0.28), rgba(255,255,255,0));
          transform: rotate(-18deg) translateX(-120%);
          filter: blur(6px);
          pointer-events: none;
          opacity: 0.0;
          transition: opacity .25s ease, transform 900ms ease;
          animation: posterSheen 3.2s linear infinite;
        }
        @keyframes posterSheen{
          0%{transform:rotate(-18deg) translateX(-120%);opacity:0}
          38%{opacity:0}
          50%{transform:rotate(-18deg) translateX(40%);opacity:.9}
          62%{opacity:0}
          100%{transform:rotate(-18deg) translateX(220%);opacity:0}
        }

        .movie-info { position: absolute; bottom: 0; left: 0; right: 0; padding: 30px; z-index: 3; }
        .movie-title { color: #fff; font-size: 1.8em; margin-bottom: 0; font-weight: bold; text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8); transition: margin-bottom 0.4s ease; }
        .movie-card:hover .movie-title { margin-bottom: 15px; }
        .movie-description { color: #e0e0e0; font-size: 1em; line-height: 1.6; margin-bottom: 20px; text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.8); max-height: 0; overflow: hidden; opacity: 0; transition: max-height 0.4s ease, opacity 0.4s ease, margin-bottom 0.4s ease; }
        .movie-card:hover .movie-description { max-height: 200px; opacity: 1; }
        .play-btn { width: 100%; font-size: 1.1em; font-weight: bold; color: #fff; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 15px; cursor: pointer; position: relative; overflow: hidden; transition: all 0.3s ease; box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4); max-height: 0; opacity: 0; padding: 0 15px; }
        .movie-card:hover .play-btn { max-height: 60px; opacity: 1; padding: 15px; }
        .play-btn::before { content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0; border-radius: 50%; background: rgba(255, 255, 255, 0.3); transform: translate(-50%, -50%); transition: width 0.6s, height 0.6s; }
        .play-btn:hover::before { width: 300px; height: 300px; }
        .play-btn:hover { transform: scale(1.05); box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6); }
        .play-btn span { position: relative; z-index: 1; }
        .player-section { display: none; animation: fadeIn 0.5s ease; padding: 40px 20px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .player-section.active { display: block; }
        .video-container { position: relative; max-width: 1200px; margin: 0 auto; padding: 50px; }
        .video-ambient-glow { position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 0; pointer-events: none; }
        .video-ambient-glow canvas { width: 100%; height: 100%; filter: blur(80px) brightness(1.8) saturate(2.5); opacity: 0.9; }
        .video-wrapper { position: relative; border-radius: 25px; overflow: hidden; box-shadow: 0 30px 80px rgba(0, 0, 0, 0.9); z-index: 1; }
        video { width: 100%; display: block; background: #000; }
        .back-btn { display: inline-block; margin: 30px auto; padding: 15px 40px; font-size: 1.1em; font-weight: bold; color: #fff; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border: none; border-radius: 50px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 30px rgba(245, 87, 108, 0.4); position: relative; overflow: hidden; }
        .back-btn::after { content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0; border-radius: 50%; background: rgba(255, 255, 255, 0.2); transform: translate(-50%, -50%); transition: width 0.5s, height 0.5s; }
        .back-btn:hover::after { width: 300px; height: 300px; }
        .back-btn:hover { transform: scale(1.05); box-shadow: 0 15px 40px rgba(245, 87, 108, 0.6); }
        .back-btn span { position: relative; z-index: 1; }
        .btn-container { text-align: center; }

        /* ====== Nuevos estilos: Logo + info actores ====== */
        .logo { text-align: center; margin-bottom: 20px; display:flex; align-items:center; justify-content:center; gap:12px; }
        /* LOGO: ahora circular y con destello */
        .logo .logo-img { width:80px; height:80px; border-radius:50%; overflow:hidden; display:inline-block; position:relative; box-shadow: 0 8px 26px rgba(0,0,0,0.6); }
        .logo .logo-img img { width:100%; height:100%; object-fit:cover; display:block; }
        /* Destello: pseudo-element animado */
        .logo .logo-img::after {
          content: "";
          position: absolute;
          top: -40%;
          left: -60%;
          width: 40%;
          height: 180%;
          background: linear-gradient(120deg, rgba(255,255,255,0.0), rgba(255,255,255,0.55), rgba(255,255,255,0.0));
          transform: rotate(-20deg) translateX(-120%);
          filter: blur(6px);
          pointer-events: none;
          opacity: 0.0;
          transition: opacity .35s;
          animation: shine 2.6s linear infinite;
        }
        @keyframes shine {
          0% { transform: rotate(-20deg) translateX(-120%); opacity: 0; }
          20% { opacity: 0.0; }
          40% { transform: rotate(-20deg) translateX(40%); opacity: 0.9; }
          60% { opacity: 0.0; }
          100% { transform: rotate(-20deg) translateX(200%); opacity: 0; }
        }
        .logo span { color: #fff; font-size: 2em; font-weight: bold; margin-left: 10px; vertical-align: middle; text-shadow: 0 0 10px #fff; }

        .movie-extra-info { max-width: 1200px; margin: 40px auto 0 auto; color: #fff; }
        .movie-extra-info h3 { margin-bottom: 20px; font-size: 2em; text-align: center; }
        .actors-grid { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; }
        .actor-card { text-align: center; transition: transform 0.3s, box-shadow 0.3s; border-radius: 15px; overflow: hidden; }
        .actor-card img { width: 150px; height: 220px; object-fit: cover; border-radius: 15px; transition: all 0.3s; }
        .actor-card:hover img { filter: brightness(1.3) drop-shadow(0 0 15px #fff); transform: scale(1.05); }
        .actor-card p { margin-top: 10px; font-size: 1em; }

        /* ====== NUEVOS estilos m√≠nimos para actor cards din√°micos y 'pill' ====== */
        .pill { font-weight:700; color:#fff; font-size:0.92rem; box-shadow: inset 0 -4px 10px rgba(0,0,0,0.25); padding:6px 10px; border-radius:999px; background:rgba(255,255,255,0.03); margin:0 6px; display:inline-block; }
        /* Reaprovechamos .actors-grid existente; estos estilos complementan */
        .actor-card {
          width:150px; text-align:center; border-radius:12px; overflow:hidden;
          background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
          box-shadow: 0 10px 30px rgba(0,0,0,0.45);
          transition: transform .28s cubic-bezier(.2,.9,.2,1), box-shadow .28s, opacity .28s;
          cursor: pointer; -webkit-tap-highlight-color: transparent;
        }
        .actor-card img { width:100%; height:170px; object-fit:cover; display:block; transition: transform .36s, filter .36s; }
        .actor-card .meta { padding:10px 12px; color:#fff; font-weight:700; min-height:72px; display:flex; flex-direction:column; gap:6px; justify-content:center; }
        .actor-card .role { color:#ffdede; font-weight:800; font-size:0.95rem; }
        .actor-card .bio { margin-top:6px; font-weight:500; font-size:0.88rem; color:#dcdcdc; line-height:1.2; max-height:0; overflow:hidden; opacity:0; transition: max-height .36s ease, opacity .36s; }
        .actor-card:hover, .actor-card.active { transform: translateY(-10px) scale(1.03); box-shadow: 0 28px 80px rgba(0,0,0,0.6); }
        .actor-card:hover img, .actor-card.active img { transform: scale(1.06); filter: brightness(1.03); }
        .actor-card:hover .bio, .actor-card.active .bio { max-height:220px; opacity:1; }

        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            .movies-grid { grid-template-columns: 1fr; gap: 40px; padding: 20px; }
            .movie-card { height: 400px; }
            .video-container { padding: 30px 10px; }
            .actors-grid { flex-direction: column; align-items: center; }
            .actor-card { width:44%; max-width:170px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ===== Logo + Nombre ===== -->
        <div class="logo">
            <div class="logo-img" aria-hidden="true">
              <img src="images/logo.png" alt="Logo NYUK">
            </div>
            <span>NYUK</span>
        </div>

        <h1>üé¨ Donde cada pel√≠cula te lleva a un nuevo mundo üé¨</h1>
        
        <div id="movies-section" class="movies-section">
            <div class="movies-grid">
                <div class="movie-card" onclick="playVideo('video1')">
                    <div class="ambient-glow">
                        <canvas id="ambient-canvas-1"></canvas>
                    </div>
                    <div class="poster-container">
                        <img src ="images/Portadas/imagen1.jpg" alt="Moana" class="poster-image" id="poster-1">
                    </div>
                    <div class="movie-info">
                        <h2 class="movie-title">Moana</h2>
                        <p class="movie-description"> 2016 ‚Äß Infantil/Aventura ‚Äß 1h 53m
                            Moana, la intr√©pida hija del jefe de Motunui, desaf√≠a los l√≠mites del oc√©ano en una misi√≥n llena de magia y peligro. Junto al audaz semidi√≥s Maui, descubrir√° secretos ancestrales, enfrentar√° monstruos y desatar√° el poder que lleva dentro para salvar a su pueblo.
                        </p>
                        <button class="play-btn" onclick="event.stopPropagation(); playVideo('video1')">
                            <span>‚ñ∂ Reproducir Ahora</span>
                        </button>
                    </div>
                </div>
                
                <div class="movie-card" onclick="playVideo('video2')">
                    <div class="ambient-glow">
                        <canvas id="ambient-canvas-2"></canvas>
                    </div>
                    <div class="poster-container">
                        <img src="images/Portadas/imagen2.jpg" alt="Marvel Studios" class="poster-image" id="poster-2">
                    </div>
                    <div class="movie-info">
                        <h2 class="movie-title">Avengers: Endgame</h2>
                        <p class="movie-description"> 2019 ‚Äß Acci√≥n/Ciencia ficci√≥n ‚Äß 3h 1m
                            Una √©pica reuni√≥n de los h√©roes m√°s poderosos del universo. Enfrenta batallas legendarias, descubre secretos sorprendentes y vive la saga que redefini√≥ el cine para siempre.
                        </p>
                        <button class="play-btn" onclick="event.stopPropagation(); playVideo('video2')">
                            <span>‚ñ∂ Reproducir Ahora</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="player-section" class="player-section">
            <div class="video-container">
                <div class="video-ambient-glow">
                    <canvas id="video-ambient-canvas"></canvas>
                </div>
                <div class="video-wrapper">
                    <video id="main-video" controls>
                        Tu navegador no soporta el elemento de video.
                    </video>
                </div>
            </div>

            <!-- ===== Informaci√≥n de la pel√≠cula (abajo del video) - REEMPLAZADA con versi√≥n din√°mica y ampliada ===== -->
            <div id="movie-info" style="margin-top: 60px; padding: 28px 20px; background: rgba(30,30,30,0.8); border-radius: 15px; max-width: 900px; margin-left: auto; margin-right: auto; color: white; box-shadow: 0 0 25px rgba(255,105,180,0.4);">
  <h2 id="movie-title-extra" style="text-align:center; font-size: 2.2rem; margin-bottom: 15px;">‚Äî</h2>
  <p id="movie-details" style="text-align:center; font-size: 1.02rem; margin-bottom: 14px; color:#e3e3e3;">‚Äî</p>

  <div style="display:flex; justify-content:center; gap:10px; margin-bottom:12px;">
    <span class="pill" id="movie-runtime">‚Äî</span>
    <span class="pill" id="movie-rating">‚Äî</span>
    <span class="pill" id="movie-genre">‚Äî</span>
  </div>

  <div id="actors-grid" class="actors-grid" aria-label="Actores principales">
    <!-- actor cards se inyectar√°n aqu√≠ por JS -->
  </div>

<!-- Cambios en la secci√≥n del bot√≥n (dentro del div con id="movie-info") -->
<div style="text-align:center; margin-top: 28px;">
  <button id="back-btn" class="back-btn">
    <span>‚Üê Volver a la lista</span>
  </button>
</div>
        </div>
    </div>

    <script>
        const videos = {
            video1: 'videos/video1.mp4',
            video2: 'videos/video2.mp4'
        };

        /* ====== Sustituido: movieInfos ampliado y real ====== */
        const movieInfos = {
            video1: {
                title: 'Moana (2016)',
                details: 'Director: Ron Clements, John Musker ‚Äî Un viaje de descubrimiento personal y ancestral.',
                synopsis: 'Moana es la historia de una joven que sigue el llamado del oc√©ano para salvar su isla. En su aventura conoce a Maui, un semidi√≥s carism√°tico, y aprende sobre su propia identidad y destino.',
                runtime: '1h 53m',
                rating: 'PG',
                genre: 'Animaci√≥n ‚Ä¢ Aventura ‚Ä¢ Familiar',
                actors: [
                    {
                        name: "Auli'i Cravalho",
                        role: "Moana (voz)",
                        img: "images/Actores/Auli'i Cravalho.jpg",
                        bio: "Actriz y cantante hawaiana. Su interpretaci√≥n aporta frescura y autenticidad cultural; debut√≥ con esta pel√≠cula y recibi√≥ elogios por su voz."
                    },
                    {
                        name: "Dwayne Johnson",
                        role: "Maui (voz)",
                        img: "images/Actores/Dwayne Johnson.jpg",
                        bio: "Tambi√©n conocido como 'The Rock'. Su voz llena a Maui de fuerza y humor; aporta carisma y presencia al papel."
                    },
                    {
                        name: "Rachel House",
                        role: "Gramma Tala (voz)",
                        img: "images/Actores/Rachel House.jpg",
                        bio: "Actriz y directora de Nueva Zelanda. Interpreta a la abuela sabia con un tono entra√±able y profundo."
                    }
                ]
            },
            video2: {
                title: 'Avengers: Endgame (2019)',
                details: 'Directores: Anthony & Joe Russo ‚Äî La conclusi√≥n √©pica de la saga Infinity.',
                synopsis: 'Tras los eventos de Infinity War, los h√©roes supervivientes buscan una forma de deshacer el acto de Thanos. Endgame mezcla drama, sacrificio y momentos ic√≥nicos que cierran arcos de m√°s de una d√©cada. üí•üåå',
                runtime: '3h 01m',
                rating: 'PG-13',
                genre: 'Acci√≥n ‚Ä¢ Ciencia ficci√≥n ‚Ä¢ Superh√©roes',
                actors: [
                    {
                        name: "Robert Downey Jr.",
                        role: "Tony Stark / Iron Man",
                        img: "images/Actores/Robert Downey Jr..jpg",
                        bio: "Icono del MCU: carism√°tico, ingenioso y tr√°gico en su arco final."
                    },
                    {
                        name: "Chris Evans",
                        role: "Steve Rogers / Captain America üá∫üá∏",
                        img: "images/Actores/Chris Evans.jpg",
                        bio: "L√≠der moral del equipo; su viaje culmina en decisiones heroicas llenas de honor."
                    },
                    {
                        name: "Scarlett Johansson",
                        role: "Natasha Romanoff / Black Widow",
                        img: "images/Actores/Scarlett Johansson.jpg",
                        bio: "Agente compleja y valiente; su arco en Endgame es clave y emotivo."
                    }
                ]
            }
        };

        let videoAnimationId;

        /* ---------- Helper: robust image loader with fallbacks ----------
           Accepts many image types (jpg/png/webp/avif/gif). If original URL fails,
           it will try alternate extensions and finally a placeholder SVG.
        -----------------------------------------------------------------*/
        const placeholderSvg = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='400' height='400'><rect width='100%' height='100%' fill='#222'/><text x='50%' y='50%' fill='#999' font-family='Arial' font-size='20' dominant-baseline='middle' text-anchor='middle'>Imagen no disponible</text></svg>`);
        function setImageWithFallback(imgEl, url) {
          if (!imgEl) return;
          imgEl.decoding = 'async';
          imgEl.loading = 'lazy';
          let tried = new Set();
          let base = url;
          // if url contains querystring remove it for extension trial, keep original for direct attempt
          const [urlNoQS, qs] = (url || '').split('?');
          const m = urlNoQS ? urlNoQS.match(/(.+)\.([a-zA-Z0-9]{2,6})$/) : null;
          let ext = m ? m[2].toLowerCase() : null;
          let baseNoExt = m ? m[1] : urlNoQS || url;
          const tryExtOrder = ['webp','avif','jpg','jpeg','png','gif'];
          let attemptIndex = 0;
          function tryNext(nextUrl) {
            imgEl.onerror = () => {
              tried.add(nextUrl);
              // find next extension to try
              while (attemptIndex < tryExtOrder.length) {
                const e = tryExtOrder[attemptIndex++];
                // build candidate
                let candidate;
                if (ext) { // original had extension: replace it
                  candidate = urlNoQS.replace(/\.[^/.]+$/, '.' + e) + (qs ? '?' + qs : '');
                } else { // no extension: append
                  candidate = baseNoExt + '.' + e + (qs ? '?' + qs : '');
                }
                if (tried.has(candidate)) continue;
                imgEl.src = candidate;
                return;
              }
              // last resort: placeholder svg
              imgEl.onerror = null;
              imgEl.src = 'data:image/svg+xml;utf8,' + placeholderSvg;
            };
            if (!nextUrl) { imgEl.src = 'data:image/svg+xml;utf8,' + placeholderSvg; return; }
            imgEl.src = nextUrl;
          }
          // first attempt: original url
          tryNext(url);
        }

        function createAmbientEffect(imageId, canvasId) {
            const img = document.getElementById(imageId);
            const canvas = document.getElementById(canvasId);
            if (!img || !canvas) return;
            const ctx = canvas.getContext('2d');

            img.onload = function() {
                try {
                  canvas.width = img.naturalWidth || canvas.clientWidth;
                  canvas.height = img.naturalHeight || canvas.clientHeight;
                  ctx.clearRect(0,0,canvas.width,canvas.height);
                  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                } catch(e) {
                  // drawing may fail due to CORS ‚Äî ignore silently
                }
            };

            if (img.complete) img.onload();
        }

        document.addEventListener('DOMContentLoaded', () => {
            createAmbientEffect('poster-1', 'ambient-canvas-1');
            createAmbientEffect('poster-2', 'ambient-canvas-2');

            // Inicializar la secci√≥n de info con Moana para que no quede vac√≠a
            const defaultInfo = movieInfos.video1;
            if (defaultInfo) {
              const titleEl = document.getElementById('movie-title-extra');
              const detailsEl = document.getElementById('movie-details');
              titleEl.textContent = defaultInfo.title;
              detailsEl.textContent = defaultInfo.synopsis || defaultInfo.details;
              document.getElementById('movie-runtime').textContent = defaultInfo.runtime;
              document.getElementById('movie-rating').textContent = defaultInfo.rating;
              document.getElementById('movie-genre').textContent = defaultInfo.genre;

              const actorsGrid = document.getElementById('actors-grid');
              actorsGrid.innerHTML = '';
              defaultInfo.actors.forEach(actor => {
                const actorDiv = document.createElement('div');
                actorDiv.className = 'actor-card';
                actorDiv.tabIndex = 0;

                // create img element and set robust loader
                const img = document.createElement('img');
                setImageWithFallback(img, actor.img);

                actorDiv.innerHTML = `
                  <div class="img-wrap"></div>
                  <div class="meta">
                    <div class="name">${actor.name}</div>
                    <div class="role">${actor.role}</div>
                    <div class="bio">${actor.bio}</div>
                  </div>
                `;
                // inject img into .img-wrap
                actorDiv.querySelector('.img-wrap').appendChild(img);

                actorDiv.addEventListener('click', () => actorDiv.classList.toggle('active'));
                actorDiv.addEventListener('keydown', (e) => {
                  if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); actorDiv.classList.toggle('active'); }
                });
                actorsGrid.appendChild(actorDiv);
              });
            }
        });

        function playVideo(videoName) {
            const moviesSection = document.getElementById('movies-section');
            const playerSection = document.getElementById('player-section');
            const video = document.getElementById('main-video');
            
            moviesSection.style.display = 'none';
            playerSection.classList.add('active');
            
            video.src = videos[videoName];
            video.play();
            startVideoAmbientEffect();

            // ===== Actualizar info de la pel√≠cula abajo del video =====
            const info = movieInfos[videoName];

            // titulo y detalles / sinopsis
            document.getElementById('movie-title-extra').textContent = info.title || '';
            document.getElementById('movie-details').textContent = info.synopsis || info.details || '';

            // metadata pills
            document.getElementById('movie-runtime').textContent = info.runtime || '‚Äî';
            document.getElementById('movie-rating').textContent = info.rating || '‚Äî';
            document.getElementById('movie-genre').textContent = info.genre || '‚Äî';

            // actores: crear tarjetas con rol y bio; hover (desktop) revela bio, click/tap alterna en mobile
            const actorsGrid = document.getElementById('actors-grid');
            actorsGrid.innerHTML = '';
            (info.actors || []).forEach(actor => {
                const actorDiv = document.createElement('div');
                actorDiv.className = 'actor-card';
                actorDiv.tabIndex = 0;

                const img = document.createElement('img');
                setImageWithFallback(img, actor.img);

                actorDiv.innerHTML = `
                    <div class="img-wrap"></div>
                    <div class="meta">
                      <div class="name">${actor.name}</div>
                      <div class="role">${actor.role || ''}</div>
                      <div class="bio">${actor.bio || ''}</div>
                    </div>
                `;
                // inject img
                actorDiv.querySelector('.img-wrap').appendChild(img);

                // Toggle bio on click/tap
                actorDiv.addEventListener('click', () => actorDiv.classList.toggle('active'));
                // Keyboard accessibility: Enter/Space toggles bio
                actorDiv.addEventListener('keydown', (e) => {
                  if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    actorDiv.classList.toggle('active');
                  }
                });
                actorsGrid.appendChild(actorDiv);
            });

            // small pop effect for info area
            const infoBox = document.getElementById('movie-info');
            infoBox.style.transform = 'translateY(6px) scale(.998)';
            setTimeout(() => { infoBox.style.transform = ''; }, 180);
        }

        function backToMovies() {
            const moviesSection = document.getElementById('movies-section');
            const playerSection = document.getElementById('player-section');
            const video = document.getElementById('main-video');
            
            video.pause();
            video.src = '';
            
            playerSection.classList.remove('active');
            moviesSection.style.display = 'block';
            
            stopVideoAmbientEffect();
        }

        /* ========== FIXED: startVideoAmbientEffect & stopVideoAmbientEffect ==========
           Previously the draw loop returned early when video.paused, causing the
           canvas to stop updating while the user was seeking (dragging the progress).
           Now we:
             - draw one frame on seeking/timeupdate so the canvas always shows the
               current frame while the user scrubs.
             - run a continuous RAF loop only when the video is playing.
             - clean up listeners on stop.
        -------------------------------------------------------------------------*/
        function startVideoAmbientEffect() {
            const video = document.getElementById('main-video');
            const canvas = document.getElementById('video-ambient-canvas');
            if (!video || !canvas) return;
            const ctx = canvas.getContext('2d');

            // Prevent double attaching
            if (video._ambientActive) return;
            video._ambientActive = true;

            // draw a single frame (defensive)
            function drawFrame() {
                try {
                    canvas.width = video.videoWidth || canvas.clientWidth || 1280;
                    canvas.height = video.videoHeight || canvas.clientHeight || 720;
                    if (canvas.width > 0 && canvas.height > 0) ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                } catch (e) {
                    // CORS or other drawing error: ignore (can't read cross-origin video)
                }
            }

            // RAF loop while playing
            let rafId = null;
            function loop() {
                drawFrame();
                rafId = requestAnimationFrame(loop);
            }

            // handlers
            function onPlay() {
                // start continuous loop
                if (rafId) cancelAnimationFrame(rafId);
                loop();
            }
            function onPause() {
                // stop RAF but draw a frame so canvas shows paused frame
                if (rafId) cancelAnimationFrame(rafId);
                rafId = null;
                drawFrame();
            }
            function onSeeking() {
                // draw current frame while scrubbing
                drawFrame();
            }
            function onTimeUpdate() {
                // when user drags the progress, timeupdate fires frequently; draw a frame
                drawFrame();
            }

            // attach listeners
            video.addEventListener('play', onPlay);
            video.addEventListener('pause', onPause);
            video.addEventListener('seeking', onSeeking);
            video.addEventListener('seeked', onSeeking);
            video.addEventListener('timeupdate', onTimeUpdate);

            // store references for cleanup
            video._ambientHandlers = { onPlay, onPause, onSeeking, onTimeUpdate, rafIdRef: () => rafId };

            // Start initial behavior: if playing, start loop; otherwise draw current frame
            if (!video.paused && !video.ended) {
                onPlay();
            } else {
                drawFrame();
            }
        }

        function stopVideoAmbientEffect() {
            const video = document.getElementById('main-video');
            if (!video || !video._ambientActive) return;
            const handlers = video._ambientHandlers || {};
            try {
                if (handlers.onPlay) video.removeEventListener('play', handlers.onPlay);
                if (handlers.onPause) video.removeEventListener('pause', handlers.onPause);
                if (handlers.onSeeking) video.removeEventListener('seeking', handlers.onSeeking);
                if (handlers.onSeeking) video.removeEventListener('seeked', handlers.onSeeking);
                if (handlers.onTimeUpdate) video.removeEventListener('timeupdate', handlers.onTimeUpdate);
                // cancel raf if any
                const rafId = handlers.rafIdRef ? handlers.rafIdRef() : null;
                if (rafId) cancelAnimationFrame(rafId);
            } catch (e) {
                // ignore
            }
            delete video._ambientHandlers;
            video._ambientActive = false;
        }

// Funci√≥n para manejar animaci√≥n ripple en el bot√≥n
const backBtn = document.getElementById('back-btn');

backBtn.addEventListener('click', (e) => {
    // Obtener posici√≥n del clic relativa al bot√≥n
    const rect = backBtn.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    backBtn.style.setProperty('--ripple-x', `${x}px`);
    backBtn.style.setProperty('--ripple-y', `${y}px`);

    backBtn.classList.add('ripple');

    // Remover la clase ripple despu√©s de la animaci√≥n para permitir repetici√≥n
    setTimeout(() => {
        backBtn.classList.remove('ripple');
    }, 600);

    // Llamar a la funci√≥n que vuelve a la lista con animaci√≥n
    backToMoviesAnimated();
});

function backToMoviesAnimated() {
    const playerSection = document.getElementById('player-section');
    const moviesSection = document.getElementById('movies-section');
    const video = document.getElementById('main-video');

    // A√±adimos una clase para animar salida (fade out)
    playerSection.style.animation = 'fadeOut 0.5s ease forwards';

    video.pause();
    video.src = '';

    // Esperamos la animaci√≥n y luego cambiamos vistas
    setTimeout(() => {
        playerSection.classList.remove('active');
        playerSection.style.animation = ''; // Limpiar animaci√≥n
        moviesSection.style.display = 'block';

        // Animaci√≥n fade in para moviesSection
        moviesSection.style.animation = 'fadeIn 0.5s ease forwards';
        setTimeout(() => {
            moviesSection.style.animation = '';
        }, 500);
    }, 500);
}

// A√±adir keyframes fadeOut si no existen
const styleSheet = document.styleSheets[0];
styleSheet.insertRule(`@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}`, styleSheet.cssRules.length);
    </script>
</body>
</html>
